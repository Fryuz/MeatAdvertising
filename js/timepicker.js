(function(e){function m(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",ampm:!1,amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"hh:mm tt",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone"},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showMillisec:!1,showTimezone:!1,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,showTimepicker:!0,timezoneIso8609:!1,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null},e.extend(this._defaults,this.regional[""])}e.extend(e.ui,{timepicker:{version:"0.9.8"}}),e.extend(m.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,setDefaults:function(i){var t=this._defaults;i=i||{};for(var s in e.extend(t,i),i)null!==i[s]&&void 0!==i[s]||(t[s]=i[s]);return this},_newInst:function(c,a){var b=new m,d={},f;for(f in this._defaults){var g=c.attr("time:"+f);if(g)try{d[f]=eval(g)}catch(e){d[f]=g}}if(b._defaults=e.extend({},this._defaults,d,a,{beforeShow:function(i,t){e.isFunction(a.beforeShow)&&a.beforeShow(i,t,b)},onChangeMonthYear:function(i,t,s){b._updateDateTime(s),e.isFunction(a.onChangeMonthYear)&&a.onChangeMonthYear.call(c[0],i,t,s,b)},onClose:function(i,t){!0===b.timeDefined&&""!=c.val()&&b._updateDateTime(t),e.isFunction(a.onClose)&&a.onClose.call(c[0],i,t,b)},timepicker:b}),b.amNames=e.map(b._defaults.amNames,(function(e){return e.toUpperCase()})),b.pmNames=e.map(b._defaults.pmNames,(function(e){return e.toUpperCase()})),null===b._defaults.timezoneList){for(d=[],f=-11;12>=f;f++)d.push((0<=f?"+":"-")+("0"+Math.abs(f).toString()).slice(-2)+"00");b._defaults.timezoneIso8609&&(d=e.map(d,(function(e){return"+0000"==e?"Z":e.substring(0,3)+":"+e.substring(3)}))),b._defaults.timezoneList=d}return b.hour=b._defaults.hour,b.minute=b._defaults.minute,b.second=b._defaults.second,b.millisec=b._defaults.millisec,b.ampm="",b.$input=c,a.altField&&(b.$altInput=e(a.altField).css({cursor:"pointer"}).focus((function(){c.trigger("focus")}))),0!=b._defaults.minDate&&0!=b._defaults.minDateTime||(b._defaults.minDate=new Date),0!=b._defaults.maxDate&&0!=b._defaults.maxDateTime||(b._defaults.maxDate=new Date),void 0!==b._defaults.minDate&&b._defaults.minDate instanceof Date&&(b._defaults.minDateTime=new Date(b._defaults.minDate.getTime())),void 0!==b._defaults.minDateTime&&b._defaults.minDateTime instanceof Date&&(b._defaults.minDate=new Date(b._defaults.minDateTime.getTime())),void 0!==b._defaults.maxDate&&b._defaults.maxDate instanceof Date&&(b._defaults.maxDateTime=new Date(b._defaults.maxDate.getTime())),void 0!==b._defaults.maxDateTime&&b._defaults.maxDateTime instanceof Date&&(b._defaults.maxDate=new Date(b._defaults.maxDateTime.getTime())),b},_addTimePicker:function(e){this.timeDefined=this._parseTime(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val()),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(i,t){var s=this._defaults.timeFormat.toString().replace(/h{1,2}/gi,"(\\d?\\d)").replace(/m{1,2}/gi,"(\\d?\\d)").replace(/s{1,2}/gi,"(\\d?\\d)").replace(/l{1}/gi,"(\\d?\\d?\\d)").replace(/t{1,2}/gi,this._getPatternAmpm()).replace(/z{1}/gi,"(z|[-+]\\d\\d:?\\d\\d)?").replace(/\s/g,"\\s?")+this._defaults.timeSuffix+"$",a=this._getFormatPositions(),n="";if(this.inst||(this.inst=e.datepicker._getInst(this.$input[0])),!t&&this._defaults.timeOnly||(s=".{"+e.datepicker._get(this.inst,"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+s),s=i.match(RegExp(s,"i"))){if(-1!==a.t&&(void 0===s[a.t]||0===s[a.t].length?this.ampm=n="":(n=-1!==e.inArray(s[a.t].toUpperCase(),this.amNames)?"AM":"PM",this.ampm=this._defaults["AM"==n?"amNames":"pmNames"][0])),-1!==a.h&&(this.hour="AM"==n&&"12"==s[a.h]?0:"PM"==n&&"12"!=s[a.h]?(parseFloat(s[a.h])+12).toFixed(0):Number(s[a.h])),-1!==a.m&&(this.minute=Number(s[a.m])),-1!==a.s&&(this.second=Number(s[a.s])),-1!==a.l&&(this.millisec=Number(s[a.l])),-1!==a.z&&void 0!==s[a.z]){switch((a=s[a.z].toUpperCase()).length){case 1:a=this._defaults.timezoneIso8609?"Z":"+0000";break;case 5:this._defaults.timezoneIso8609&&(a="0000"==a.substring(1)?"Z":a.substring(0,3)+":"+a.substring(3));break;case 6:this._defaults.timezoneIso8609?"00:00"==a.substring(1)&&(a="Z"):a="Z"==a||"00:00"==a.substring(1)?"+0000":a.replace(/:/,"")}this.timezone=a}return!0}return!1},_getPatternAmpm:function(){var i=[];return o=this._defaults,o.amNames&&e.merge(i,o.amNames),o.pmNames&&e.merge(i,o.pmNames),"("+(i=e.map(i,(function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}))).join("|")+")?"},_getFormatPositions:function(){var e=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z)/g),i={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(e)for(var t=0;t<e.length;t++)-1==i[e[t].toString().charAt(0)]&&(i[e[t].toString().charAt(0)]=t+1);return i},_injectTimePicker:function(){var i=this.inst.dpDiv,t=this._defaults,s=this,a=parseInt(t.hourMax-(t.hourMax-t.hourMin)%t.stepHour,10),n=parseInt(t.minuteMax-(t.minuteMax-t.minuteMin)%t.stepMinute,10),l=parseInt(t.secondMax-(t.secondMax-t.secondMin)%t.stepSecond,10),r=parseInt(t.millisecMax-(t.millisecMax-t.millisecMin)%t.stepMillisec,10),d=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(0===i.find("div#ui-timepicker-div-"+d).length&&t.showTimepicker){var o,u='<div class="ui-timepicker-div" id="ui-timepicker-div-'+d+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+d+'"'+(t.showTime?"":' style="display:none;"')+">"+t.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+d+'"'+(t.showTime?"":' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+d+'"'+(t.showHour?"":' style="display:none;"')+">"+t.hourText+"</dt>",c=0,m=0,h=0,_=0;u=u+'<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+d+'"'+(t.showHour?"":' style="display:none;"')+"></div>";if(t.showHour&&0<t.hourGrid){u=u+'<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var p=t.hourMin;p<=a;p+=parseInt(t.hourGrid,10)){c++;var f=t.ampm&&12<p?p-12:p;10>f&&(f="0"+f),t.ampm&&(f=0==p?"12a":12>p?f+"a":f+"p"),u+="<td>"+f+"</td>"}u+="</tr></table></div>"}if(u=u+'</dd><dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+d+'"'+(t.showMinute?"":' style="display:none;"')+">"+t.minuteText+'</dt><dd class="ui_tpicker_minute"><div id="ui_tpicker_minute_'+d+'"'+(t.showMinute?"":' style="display:none;"')+"></div>",t.showMinute&&0<t.minuteGrid){for(u+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',p=t.minuteMin;p<=n;p+=parseInt(t.minuteGrid,10))m++,u+="<td>"+(10>p?"0":"")+p+"</td>";u+="</tr></table></div>"}if(u=u+'</dd><dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+d+'"'+(t.showSecond?"":' style="display:none;"')+">"+t.secondText+'</dt><dd class="ui_tpicker_second"><div id="ui_tpicker_second_'+d+'"'+(t.showSecond?"":' style="display:none;"')+"></div>",t.showSecond&&0<t.secondGrid){for(u+='<div style="padding-left: 1px"><table><tr>',p=t.secondMin;p<=l;p+=parseInt(t.secondGrid,10))h++,u+="<td>"+(10>p?"0":"")+p+"</td>";u+="</tr></table></div>"}if(u=u+'</dd><dt class="ui_tpicker_millisec_label" id="ui_tpicker_millisec_label_'+d+'"'+(t.showMillisec?"":' style="display:none;"')+">"+t.millisecText+'</dt><dd class="ui_tpicker_millisec"><div id="ui_tpicker_millisec_'+d+'"'+(t.showMillisec?"":' style="display:none;"')+"></div>",t.showMillisec&&0<t.millisecGrid){for(u+='<div style="padding-left: 1px"><table><tr>',p=t.millisecMin;p<=r;p+=parseInt(t.millisecGrid,10))_++,u+="<td>"+(10>p?"0":"")+p+"</td>";u+="</tr></table></div>"}if(u=u+'</dd><dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+d+'"'+(t.showTimezone?"":' style="display:none;"')+">"+t.timezoneText+"</dt>",u+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+d+'"'+(t.showTimezone?"":' style="display:none;"')+"></dd>",$tp=e(u+"</dl></div>"),!0===t.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),i.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),this.hour_slider=$tp.find("#ui_tpicker_hour_"+d).slider({orientation:"horizontal",value:this.hour,min:t.hourMin,max:a,step:t.stepHour,slide:function(e,i){s.hour_slider.slider("option","value",i.value),s._onTimeChange()}}),this.minute_slider=$tp.find("#ui_tpicker_minute_"+d).slider({orientation:"horizontal",value:this.minute,min:t.minuteMin,max:n,step:t.stepMinute,slide:function(e,i){s.minute_slider.slider("option","value",i.value),s._onTimeChange()}}),this.second_slider=$tp.find("#ui_tpicker_second_"+d).slider({orientation:"horizontal",value:this.second,min:t.secondMin,max:l,step:t.stepSecond,slide:function(e,i){s.second_slider.slider("option","value",i.value),s._onTimeChange()}}),this.millisec_slider=$tp.find("#ui_tpicker_millisec_"+d).slider({orientation:"horizontal",value:this.millisec,min:t.millisecMin,max:r,step:t.stepMillisec,slide:function(e,i){s.millisec_slider.slider("option","value",i.value),s._onTimeChange()}}),this.timezone_select=$tp.find("#ui_tpicker_timezone_"+d).append("<select></select>").find("select"),e.fn.append.apply(this.timezone_select,e.map(t.timezoneList,(function(i){return e("<option />").val("object"==typeof i?i.value:i).text("object"==typeof i?i.label:i)}))),this.timezone_select.val(void 0!==this.timezone&&null!=this.timezone&&""!=this.timezone?this.timezone:t.timezone),this.timezone_select.change((function(){s._onTimeChange()})),t.showHour&&0<t.hourGrid&&(o=100*c*t.hourGrid/(a-t.hourMin),$tp.find(".ui_tpicker_hour table").css({width:o+"%",marginLeft:o/(-2*c)+"%",borderCollapse:"collapse"}).find("td").each((function(){e(this).click((function(){var i=e(this).html();if(t.ampm){var a=i.substring(2).toLowerCase();i=parseInt(i.substring(0,2),10),i="a"==a?12==i?0:i:12==i?12:i+12}s.hour_slider.slider("option","value",i),s._onTimeChange(),s._onSelectHandler()})).css({cursor:"pointer",width:100/c+"%",textAlign:"center",overflow:"hidden"})}))),t.showMinute&&0<t.minuteGrid&&(o=100*m*t.minuteGrid/(n-t.minuteMin),$tp.find(".ui_tpicker_minute table").css({width:o+"%",marginLeft:o/(-2*m)+"%",borderCollapse:"collapse"}).find("td").each((function(){e(this).click((function(){s.minute_slider.slider("option","value",e(this).html()),s._onTimeChange(),s._onSelectHandler()})).css({cursor:"pointer",width:100/m+"%",textAlign:"center",overflow:"hidden"})}))),t.showSecond&&0<t.secondGrid&&$tp.find(".ui_tpicker_second table").css({width:o+"%",marginLeft:o/(-2*h)+"%",borderCollapse:"collapse"}).find("td").each((function(){e(this).click((function(){s.second_slider.slider("option","value",e(this).html()),s._onTimeChange(),s._onSelectHandler()})).css({cursor:"pointer",width:100/h+"%",textAlign:"center",overflow:"hidden"})})),t.showMillisec&&0<t.millisecGrid&&$tp.find(".ui_tpicker_millisec table").css({width:o+"%",marginLeft:o/(-2*_)+"%",borderCollapse:"collapse"}).find("td").each((function(){e(this).click((function(){s.millisec_slider.slider("option","value",e(this).html()),s._onTimeChange(),s._onSelectHandler()})).css({cursor:"pointer",width:100/_+"%",textAlign:"center",overflow:"hidden"})})),(a=i.find(".ui-datepicker-buttonpane")).length?a.before($tp):i.append($tp),this.$timeObj=$tp.find("#ui_tpicker_time_"+d),null!==this.inst&&(i=this.timeDefined,this._onTimeChange(),this.timeDefined=i),i=function(){s._onSelectHandler()},this.hour_slider.bind("slidestop",i),this.minute_slider.bind("slidestop",i),this.second_slider.bind("slidestop",i),this.millisec_slider.bind("slidestop",i),this._defaults.addSliderAccess){var g=this._defaults.sliderAccessArgs;setTimeout((function(){if(0==$tp.find(".ui-slider-access").length){$tp.find(".ui-slider:visible").sliderAccess(g);var i=$tp.find(".ui-slider-access:eq(0)").outerWidth(!0);i&&$tp.find("table:visible").each((function(){var t=e(this),s=t.outerWidth(),a=t.css("marginLeft").toString().replace("%",""),n=s-i;t.css({width:n,marginLeft:a*n/s+"%"})}))}}),0)}}},_limitMinMaxDateTime:function(i,t){var s=this._defaults,a=new Date(i.selectedYear,i.selectedMonth,i.selectedDay);if(this._defaults.showTimepicker){if(null!==e.datepicker._get(i,"minDateTime")&&void 0!==e.datepicker._get(i,"minDateTime")&&a){var n=e.datepicker._get(i,"minDateTime"),l=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal||(this.hourMinOriginal=s.hourMin,this.minuteMinOriginal=s.minuteMin,this.secondMinOriginal=s.secondMin,this.millisecMinOriginal=s.millisecMin),i.settings.timeOnly||l.getTime()==a.getTime()?(this._defaults.hourMin=n.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=n.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=n.getSeconds()):this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=n.getMilliseconds()):(this.millisec<this._defaults.millisecMin&&(this.millisec=this._defaults.millisecMin),this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)}null!==e.datepicker._get(i,"maxDateTime")&&void 0!==e.datepicker._get(i,"maxDateTime")&&a&&(n=e.datepicker._get(i,"maxDateTime"),l=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal||(this.hourMaxOriginal=s.hourMax,this.minuteMaxOriginal=s.minuteMax,this.secondMaxOriginal=s.secondMax,this.millisecMaxOriginal=s.millisecMax),i.settings.timeOnly||l.getTime()==a.getTime()?(this._defaults.hourMax=n.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=n.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=n.getSeconds()):this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=n.getMilliseconds()):(this.millisec>this._defaults.millisecMax&&(this.millisec=this._defaults.millisecMax),this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)),void 0!==t&&!0===t&&(s=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),a=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),n=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),l=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),this.hour_slider&&this.hour_slider.slider("option",{min:this._defaults.hourMin,max:s}).slider("value",this.hour),this.minute_slider&&this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:a}).slider("value",this.minute),this.second_slider&&this.second_slider.slider("option",{min:this._defaults.secondMin,max:n}).slider("value",this.second),this.millisec_slider&&this.millisec_slider.slider("option",{min:this._defaults.millisecMin,max:l}).slider("value",this.millisec))}},_onTimeChange:function(){var i=!!this.hour_slider&&this.hour_slider.slider("value"),t=!!this.minute_slider&&this.minute_slider.slider("value"),s=!!this.second_slider&&this.second_slider.slider("value"),a=!!this.millisec_slider&&this.millisec_slider.slider("value"),n=!!this.timezone_select&&this.timezone_select.val(),l=this._defaults;"object"==typeof i&&(i=!1),"object"==typeof t&&(t=!1),"object"==typeof s&&(s=!1),"object"==typeof a&&(a=!1),"object"==typeof n&&(n=!1),!1!==i&&(i=parseInt(i,10)),!1!==t&&(t=parseInt(t,10)),!1!==s&&(s=parseInt(s,10)),!1!==a&&(a=parseInt(a,10));var r=l[12>i?"amNames":"pmNames"][0],d=i!=this.hour||t!=this.minute||s!=this.second||a!=this.millisec||0<this.ampm.length&&12>i!=(-1!==e.inArray(this.ampm.toUpperCase(),this.amNames))||n!=this.timezone;d&&(!1!==i&&(this.hour=i),!1!==t&&(this.minute=t),!1!==s&&(this.second=s),!1!==a&&(this.millisec=a),!1!==n&&(this.timezone=n),this.inst||(this.inst=e.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),l.ampm&&(this.ampm=r),this._formatTime(),this.$timeObj&&this.$timeObj.text(this.formattedTime+l.timeSuffix),this.timeDefined=!0,d&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect,i=this.$input?this.$input[0]:null;e&&i&&e.apply(i,[this.formattedDateTime,this])},_formatTime:function(i,t,s){null==s&&(s=this._defaults.ampm);i=i||{hour:this.hour,minute:this.minute,second:this.second,millisec:this.millisec,ampm:this.ampm,timezone:this.timezone};var a=(t||this._defaults.timeFormat).toString(),n=parseInt(i.hour,10);if(s&&(-1!==!e.inArray(i.ampm.toUpperCase(),this.amNames)&&(n%=12),0===n&&(n=12)),a=a.replace(/(?:hh?|mm?|ss?|[tT]{1,2}|[lz])/g,(function(e){switch(e.toLowerCase()){case"hh":return("0"+n).slice(-2);case"h":return n;case"mm":return("0"+i.minute).slice(-2);case"m":return i.minute;case"ss":return("0"+i.second).slice(-2);case"s":return i.second;case"l":return("00"+i.millisec).slice(-3);case"z":return i.timezone;case"t":case"tt":if(s){var t=i.ampm;return 1==e.length&&(t=t.charAt(0)),"T"==e.charAt(0)?t.toUpperCase():t.toLowerCase()}return""}})),arguments.length)return a;this.formattedTime=a},_updateDateTime:function(i){i=this.inst||i;var t=e.datepicker._daylightSavingAdjust(new Date(i.selectedYear,i.selectedMonth,i.selectedDay)),s=e.datepicker._get(i,"dateFormat"),a=e.datepicker._getFormatConfig(i),n=null!==t&&this.timeDefined;t=this.formattedDate=e.datepicker.formatDate(s,null===t?new Date:t,a);void 0!==i.lastVal&&0<i.lastVal.length&&0===this.$input.val().length||(!0===this._defaults.timeOnly?t=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||n)&&(t+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=t,this._defaults.showTimepicker?this.$altInput&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):(this.$altInput&&this.$altInput.val(t),this.$input.val(t)):this.$input.val(this.formattedDate),this.$input.trigger("change"))}}),e.fn.extend({timepicker:function(i){var t=arguments;return"object"==typeof(i=i||{})&&(t[0]=e.extend(i,{timeOnly:!0})),e(this).each((function(){e.fn.datetimepicker.apply(e(this),t)}))},datetimepicker:function(i){var t=arguments;return"string"==typeof(i=i||{})?"getDate"==i?e.fn.datepicker.apply(e(this[0]),t):this.each((function(){var i=e(this);i.datepicker.apply(i,t)})):this.each((function(){var t=e(this);t.datepicker(e.timepicker._newInst(t,i)._defaults)}))}}),e.datepicker._base_selectDate=e.datepicker._selectDate,e.datepicker._selectDate=function(i,t){var s=this._getInst(e(i)[0]),a=this._get(s,"timepicker");a?(a._limitMinMaxDateTime(s,!0),s.inline=s.stay_open=!0,this._base_selectDate(i,t),s.inline=s.stay_open=!1,this._notifyChange(s),this._updateDatepicker(s)):this._base_selectDate(i,t)},e.datepicker._base_updateDatepicker=e.datepicker._updateDatepicker,e.datepicker._updateDatepicker=function(i){var t=i.input[0];e.datepicker._curInst&&e.datepicker._curInst!=i&&e.datepicker._datepickerShowing&&e.datepicker._lastInput!=t||"boolean"==typeof i.stay_open&&!1!==i.stay_open||(this._base_updateDatepicker(i),(t=this._get(i,"timepicker"))&&t._addTimePicker(i))},e.datepicker._base_doKeyPress=e.datepicker._doKeyPress,e.datepicker._doKeyPress=function(i){var t=e.datepicker._getInst(i.target);if((a=e.datepicker._get(t,"timepicker"))&&e.datepicker._get(t,"constrainInput")){var s=a._defaults.ampm,a=(t=e.datepicker._possibleChars(e.datepicker._get(t,"dateFormat")),a._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,s?"APM":"").replace(/Tt/g,s?"AaPpMm":"").replace(/tT/g,s?"AaPpMm":"").replace(/T/g,s?"AP":"").replace(/tt/g,s?"apm":"").replace(/t/g,s?"ap":"")+" "+a._defaults.separator+a._defaults.timeSuffix+(a._defaults.showTimezone?a._defaults.timezoneList.join(""):"")+a._defaults.amNames.join("")+a._defaults.pmNames.join("")+t);s=String.fromCharCode(void 0===i.charCode?i.keyCode:i.charCode);return i.ctrlKey||" ">s||!t||-1<a.indexOf(s)}return e.datepicker._base_doKeyPress(i)},e.datepicker._base_doKeyUp=e.datepicker._doKeyUp,e.datepicker._doKeyUp=function(i){var t=e.datepicker._getInst(i.target),s=e.datepicker._get(t,"timepicker");if(s&&s._defaults.timeOnly&&t.input.val()!=t.lastVal)try{e.datepicker._updateDatepicker(t)}catch(i){e.datepicker.log(i)}return e.datepicker._base_doKeyUp(i)},e.datepicker._base_gotoToday=e.datepicker._gotoToday,e.datepicker._gotoToday=function(i){var t=this._getInst(e(i)[0]),s=t.dpDiv;this._base_gotoToday(i);i=new Date;var a=this._get(t,"timepicker");if(a._defaults.showTimezone&&a.timezone_select){var n=0<(r=i.getTimezoneOffset())?"-":"+",l=(r=Math.abs(r))%60,r=n+("0"+(r-l)/60).slice(-2)+("0"+l).slice(-2);a._defaults.timezoneIso8609&&(r=r.substring(0,3)+":"+r.substring(3)),a.timezone_select.val(r)}this._setTime(t,i),e(".ui-datepicker-today",s).click()},e.datepicker._disableTimepickerDatepicker=function(i){var t=this._getInst(i),s=this._get(t,"timepicker");e(i).datepicker("getDate"),s&&(s._defaults.showTimepicker=!1,s._updateDateTime(t))},e.datepicker._enableTimepickerDatepicker=function(i){var t=this._getInst(i),s=this._get(t,"timepicker");e(i).datepicker("getDate"),s&&(s._defaults.showTimepicker=!0,s._addTimePicker(t),s._updateDateTime(t))},e.datepicker._setTime=function(e,i){var t=this._get(e,"timepicker");if(t){var s=t._defaults,a=i?i.getHours():s.hour,n=i?i.getMinutes():s.minute,l=i?i.getSeconds():s.second,r=i?i.getMilliseconds():s.millisec;(a<s.hourMin||a>s.hourMax||n<s.minuteMin||n>s.minuteMax||l<s.secondMin||l>s.secondMax||r<s.millisecMin||r>s.millisecMax)&&(a=s.hourMin,n=s.minuteMin,l=s.secondMin,r=s.millisecMin),t.hour=a,t.minute=n,t.second=l,t.millisec=r,t.hour_slider&&t.hour_slider.slider("value",a),t.minute_slider&&t.minute_slider.slider("value",n),t.second_slider&&t.second_slider.slider("value",l),t.millisec_slider&&t.millisec_slider.slider("value",r),t._onTimeChange(),t._updateDateTime(e)}},e.datepicker._setTimeDatepicker=function(e,i,t){e=this._getInst(e);var s=this._get(e,"timepicker");s&&(this._setDateFromField(e),i&&("string"==typeof i?(s._parseTime(i,t),(i=new Date).setHours(s.hour,s.minute,s.second,s.millisec)):i=new Date(i.getTime()),"Invalid Date"==i.toString()&&(i=void 0),this._setTime(e,i)))},e.datepicker._base_setDateDatepicker=e.datepicker._setDateDatepicker,e.datepicker._setDateDatepicker=function(e,i){var t=this._getInst(e),s=i instanceof Date?new Date(i.getTime()):i;this._updateDatepicker(t),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,s,!0)},e.datepicker._base_getDateDatepicker=e.datepicker._getDateDatepicker,e.datepicker._getDateDatepicker=function(i,t){var s=this._getInst(i),a=this._get(s,"timepicker");return a?(this._setDateFromField(s,t),(s=this._getDate(s))&&a._parseTime(e(i).val(),a.timeOnly)&&s.setHours(a.hour,a.minute,a.second,a.millisec),s):this._base_getDateDatepicker(i,t)},e.datepicker._base_parseDate=e.datepicker.parseDate,e.datepicker.parseDate=function(e,i,t){var s;try{s=this._base_parseDate(e,i,t)}catch(a){s=this._base_parseDate(e,i.substring(0,i.length-(a.length-a.indexOf(":")-2)),t)}return s},e.datepicker._base_formatDate=e.datepicker._formatDate,e.datepicker._formatDate=function(e,i,t,s){var a=this._get(e,"timepicker");return a?(i&&this._base_formatDate(e,i,t,s),a._updateDateTime(e),a.$input.val()):this._base_formatDate(e)},e.datepicker._base_optionDatepicker=e.datepicker._optionDatepicker,e.datepicker._optionDatepicker=function(e,i,t){var s,a,n,l=this._get(this._getInst(e),"timepicker");l&&("string"==typeof i?"minDate"===i||"minDateTime"===i?s=t:"maxDate"===i||"maxDateTime"===i?a=t:"onSelect"===i&&(n=t):"object"==typeof i&&(i.minDate?s=i.minDate:i.minDateTime?s=i.minDateTime:i.maxDate?a=i.maxDate:i.maxDateTime&&(a=i.maxDateTime)),s?(s=0==s?new Date:new Date(s),l._defaults.minDate=s,l._defaults.minDateTime=s):a?(a=0==a?new Date:new Date(a),l._defaults.maxDate=a,l._defaults.maxDateTime=a):n&&(l._defaults.onSelect=n));return void 0===t?this._base_optionDatepicker(e,i):this._base_optionDatepicker(e,i,t)},e.timepicker=new m,e.timepicker.version="0.9.8"})(jQuery),jQuery((function(e){e.datepicker.regional.ru={closeText:"Закрыть",prevText:"Предыдущий",nextText:"Следующий",currentText:"Сегодня",monthNames:"Январь,Февраль,Март,Апрель,Май,Июнь,Июль,Август,Сентябрь,Октябрь,Ноябрь,Декабрь".split(","),monthNamesShort:"Янв,Фев,Мар,Апр,Май,Июн,Июл,Авг,Сен,Окт,Ноя,Дек".split(","),dayNames:"воскресенье,понедельник,вторник,среда,четверг,пятница,суббота".split(","),dayNamesShort:"вск,пнд,втр,срд,чтв,птн,сбт".split(","),dayNamesMin:"Вс,Пн,Вт,Ср,Чт,Пт,Сб".split(","),weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}})),function(e){e.timepicker.regional.ru={timeOnlyTitle:"Укажите время",timeText:"Время",hourText:"Часы",minuteText:"Минуты",secondText:"Секунды",millisecText:"Миллисекунды",timezoneText:"Часовой пояс",currentText:"Текущее",closeText:"Закрыть",timeFormat:"hh:mm tt",amNames:["AM","A"],pmNames:["PM","P"],ampm:!1},e.timepicker.setDefaults(e.timepicker.regional.ru)}(jQuery);